package com.mycompany.ocxee.controller;

import com.mycompany.ocxee.DAO.PesanTiketDAO;
import com.mycompany.ocxee.model.PesanTiket;
import java.sql.Date;

public class PesanTiketController {
    private PesanTiketDAO tiketDAO;

    public PesanTiketController(PesanTiketDAO tiketDAO) {
        this.tiketDAO = tiketDAO;
    }

    public void pesanTiket(int idPenyelam, int idDestinasi, Date tanggal, int waktu, int quantity, int harga) {
        try {
            // Menghitung total harga berdasarkan jumlah tiket
            int totalHarga = harga * quantity;

            // Membuat objek PesanTiket dan mengirimkan ke DAO
            PesanTiket tiket = new PesanTiket(generateIdTiket(), idPenyelam, idDestinasi, tanggal, waktu, quantity, harga, null);
            tiketDAO.insertPesanTiket(tiket);

            // Menampilkan informasi total harga
            System.out.println("Tiket berhasil dipesan!");
            System.out.println("Total Harga: Rp " + totalHarga);
        } catch (Exception e) {
            System.err.println("Terjadi kesalahan saat memesan tiket: " + e.getMessage());
        }
    }

    private int generateIdTiket() {
        // ID acak untuk simulasi
        return (int) (Math.random() * 100000);
    }
}
